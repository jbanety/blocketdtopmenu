/**!
 * @package     blocketdtopmenu
 *
 * @version     2.2.0
 * @copyright   Copyright (C) 2017 ETD Solutions. Tous droits réservés.
 * @license     https://raw.githubusercontent.com/jbanety/blocketdcustom/master/LICENSE
 * @author      Jean-Baptiste Alleaume http://alleau.me
 */!function(e,t){"function"==typeof define&&define.amd?define(["jquery"],t):t(e.jQuery)}(this,function(e){"use strict";var t=e("body"),o=e(window),n={subToggleSelector:'[data-toggle="subnavbar"]',itemDropdownSelector:"li.dropdown",subNavBarSelector:".subnavbar"},i=function(t,o){this.$element=e(t),this.options=o,this.buildOverlay().bind()};i.prototype={constructor:i,buildOverlay:function(){var o=e("#etdtopmenu-overlay");return 0===o.length&&(o=e('<div id="etdtopmenu-overlay"></div>')).appendTo(t).hide(),this.$overlay=o,this},bind:function(){return this.$element.find(this.options.subToggleSelector).on("click",e.proxy(this.toggleSubMenu,this)),this.$overlay.on("click",e.proxy(this.hide,this)),this},toggleSubMenu:function(t){t.preventDefault();var o=e(t.target);o.is(this.options.subToggleSelector)||(o=o.parents(this.options.subToggleSelector));var n=o.parents(this.options.itemDropdownSelector),i=this.$element.find(this.options.itemDropdownSelector);n.hasClass("open")?(this.unlockScroll().hideOverlay(),i.removeClass("open")):(this.lockScroll().reposition(n).showOverlay(),i.removeClass("open"),n.addClass("open"))},showOverlay:function(){return this.$overlay.show(),this},hideOverlay:function(){return this.$overlay.hide(),this},lockScroll:function(){return t.addClass("topmenu-open"),this},unlockScroll:function(){return t.removeClass("topmenu-open"),this},reposition:function(e){var t=this.$element.find(this.options.itemDropdownSelector),n=t.offset().top+t.outerHeight()-o.scrollTop();return t.find(this.options.subNavBarSelector).css("top",n),this.$overlay.css("top",n),this},hide:function(){return this.hideOverlay().unlockScroll(),this.$element.find(this.options.itemDropdownSelector).removeClass("open"),this}},e.fn.etdtopmenu=function(t){return t=e.extend(!0,{},n,t),this.each(function(){var o=e(this);o.data("etdtopmenu",new i(o,t))})},e.fn.etdtopmenu.defaults=n,e.fn.etdtopmenu.EtdTopMenu=i});